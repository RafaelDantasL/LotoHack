<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento via PIX</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; margin-top: 50px; }
        #qrcode { margin-top: 20px; display: none; }
    </style>
</head>
<body>
    <h1>Pagamento via PIX</h1>
    <form id="payment-form">
        <label>Valor (R$):</label><br>
        <input type="number" id="amount" step="0.01" required><br><br>
        <label>E-mail:</label><br>
        <input type="email" id="email" required><br><br>
        <label>CPF:</label><br>
        <input type="text" id="cpf" required><br><br>
        <button type="button" id="generate-pix">Gerar PIX</button>
    </form>
    <div id="qrcode">
        <h3>QR Code para pagamento:</h3>
        <img id="qrcode-img" src="" alt="QR Code">
    </div>

    <script>
        document.getElementById('generate-pix').addEventListener('click', async () => {
            const amount = parseFloat(document.getElementById('amount').value);
            const email = document.getElementById('email').value;
            const cpf = document.getElementById('cpf').value;

            if (!amount || amount <= 0 || !email || !cpf) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycby-_a-KSF_fT18Qxx5mSx7GlhAVmzYsAlH5p2JlexyEeomj1TZivWga6OZiEulQzlwB/exec', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        amount: amount,
                        description: 'Pagamento via PIX',
                        email: email,
                        firstName: 'JoÃ£o',
                        lastName: 'Silva',
                        cpf: cpf
                    })
                });

                const data = await response.json();
                if (data.point_of_interaction) {
                    const qrCodeImg = document.getElementById('qrcode-img');
                    qrCodeImg.src = `data:image/png;base64,${data.point_of_interaction.transaction_data.qr_code_base64}`;
                    document.getElementById('qrcode').style.display = 'block';
                } else {
                    alert('Erro ao gerar QR Code PIX.');
                }
            } catch (error) {
                console.error(error);
                alert('Erro ao processar o pagamento.');
            }
        });
    </script>
</body>
</html>
