<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Site Data Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        select {
            margin-bottom: 20px;
            padding: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style>
</head>
<body>
    <h1>Site Data Viewer</h1>
    <label for="siteSelector">Select a site:</label>
    <select id="siteSelector">
        <option value="">-- Select a site --</option>
    </select>
    <div id="dataContainer">
        <p>Please select a site to view data.</p>
    </div>

    <script>
        const SITES = [
            { nome: 'BAHIA MALUCA', url: 'https://www.resultadofacil.com.br/resultados-maluca-bahia-de-hoje' },
            { nome: 'BAHIA', url: 'https://www.resultadofacil.com.br/resultados-paratodos-bahia-de-hoje' },
            { nome: 'LOTECE', url: 'https://www.resultadofacil.com.br/resultado-do-jogo-do-bicho/CE' },
            { nome: 'LOOK/GOIAS', url: 'https://www.resultadofacil.com.br/resultado-do-jogo-do-bicho/GO' },
            { nome: 'LOTEP', url: 'https://www.resultadofacil.com.br/resultado-do-jogo-do-bicho/PB' },
            { nome: 'PT RIO', url: 'https://www.resultadofacil.com.br/resultado-do-jogo-do-bicho/RJ' },
            { nome: 'PT SP', url: 'https://www.resultadofacil.com.br/resultado-do-jogo-do-bicho/SP' }
        ];

        const siteSelector = document.getElementById('siteSelector');
        const dataContainer = document.getElementById('dataContainer');

        // Populate dropdown
        SITES.forEach(site => {
            const option = document.createElement('option');
            option.value = site.url;
            option.textContent = site.nome;
            siteSelector.appendChild(option);
        });

        // Fetch and display data
        siteSelector.addEventListener('change', async (event) => {
            const url = event.target.value;

            if (!url) {
                dataContainer.innerHTML = '<p>Please select a site to view data.</p>';
                return;
            }

            dataContainer.innerHTML = '<p>Loading data...</p>';

            try {
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error(`Failed to fetch data: ${response.status}`);
                }

                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');

                // Extract table and title
                const tables = doc.querySelectorAll('table');
                const titles = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');

                if (tables.length === 0) {
                    dataContainer.innerHTML = '<p>No table data found on this site.</p>';
                    return;
                }

                let htmlContent = '';
                tables.forEach((table, index) => {
                    const title = titles[index] ? `<h3>${titles[index].textContent}</h3>` : '';
                    htmlContent += `${title}${table.outerHTML}`;
                });

                dataContainer.innerHTML = htmlContent;
            } catch (error) {
                dataContainer.innerHTML = `<p>Error loading data: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>
